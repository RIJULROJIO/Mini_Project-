{% load static %}

<!DOCTYPE html>
<html>
<head>
    
    <title>Sign Up Page</title>
    <style>
          /* Reset some default styles */
          body, h1, h2, p, ul, li {
            margin: 0;
            padding: 0;
        }

        /* CSS for Header */
        body {
            font-family: Arial, sans-serif;
            background-image: url('background-image.jpg');
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-color: antiquewhite;
            margin: 0;
        }

        header {
            background-color: rgba(112, 155, 103, 0.7);
            color: #577835;
            text-align: left;
            padding: 20px;
        }

        header h1 {
            font-size: 36px;
            margin-bottom: 10px;
        }

        a {
            text-decoration: none;
            color: #eff0ee;
        }

        /* CSS for Main Content */
        main {
            padding: 20px;
            background-color: rgba(185, 182, 183, 0.9);
            border-radius: 10px;
            margin: 20px;
            min-height: 80vh;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        /* CSS for Sign Up Form Container */
        .signup-container {
            background-color: #fcd28a;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* CSS for Sign Up Form */
        .signup-form {
            background-image: url('{% static "images/keyp.jpg" %}');
            background-repeat: no-repeat;
            background-size:70%;
            background-color: transparent; /* Removed background color */
            padding: 5px;
            border-radius: 5px;
            box-shadow: none; /* Removed box shadow */
        }

        .signup-form h2 {
            font-size: 20px;
            margin-bottom: 5px;
        }

        /* Reordered form fields and adjusted styling */
        .form-group {
            margin-bottom: 10px; /* Reduced margin */
        }

        .form-group label {
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }

        .messages .success {
            background-color: #4CAF50;
        }

        .messages .error {
            background-color: #f44336;
            color: white;
        }

        .form-group input[type="text"],
        .form-group input[type="password"],
        .form-group input[type="email"] {
            width: 60%;
            padding: 5px; /* Reduced padding */
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .role-selector {
            margin-bottom: 10px;
        }

        .role-selector label {
            font-weight: bold;
        }

        .role-selector input[type="radio"] {
            margin-right: 10px;
        }

        /* CSS for Buttons */
        .btn {
            background-color: #f09fee;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .btn:hover {
            background-color: #a9dcab;
        }

        /* CSS for Footer */
        footer {
            background-color: rgba(136, 98, 98, 0.7);
            color: #fff;
            text-align: center;
            padding: 10px;
            width: 100%;
        }

        /* Media Queries for Responsive Design */
        @media screen and (max-width: 768px) {
            .signup-container {
                padding: 10px;
            }

            .signup-form h2 {
                font-size: 20px;
            }

            .form-group input[type="text"],
            .form-group input[type="password"],
            .form-group input[type="email"] {
                width: 100%;
                padding: 5px; /* Reduced padding */
            }

            .btn {
                padding: 8px 16px; /* Adjusted padding */
            }
        }

        .error {
            color: red;
            font-size: 14px;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <header>
        <h1><a href="index.html">PROPERTY RENTALS</a></h1>
        
    </header>
    
    <main>
        {% if messages %}
    <ul class="messages">
        {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </ul>
{% endif %}

<div class="signup-form">
    <h2>Sign Up</h2>
    <form action="#" method="post" id="signup-form">
        {% csrf_token %} 
        <div class="role-selector">
            <div class="role-selector">
                <label for="tenant">I am a Tenant:</label>
                <input type="radio" id="tenant" name="role" value="tenant" >
                <label for="owner">I am a Property Owner:</label>
                <input type="radio" id="owner" name="role" value="owner">
            </div>
        </div>
        <div class="form-group">
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" required placeholder="username">
            <small id="username-error" class="error"></small>
        </div>
        <div class="form-group">
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required placeholder="password">
            <small id="password-error" class="error"></small>
        </div>
        <div class="form-group">
            <label for="confirm_password">Confirm Password:</label>
            <input type="password" id="confirm_password" name="confirm_password" required placeholder="confirm password">
            <small id="confirm-password-error" class="error"></small>
        </div>
        
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required placeholder="email">
            <small id="email-error" class="error"></small>
        </div>
        <div>
            <button class="btn" type="submit">Sign Up</button>
        </div>
    </form>
</div>
</main>

<script>
const form = document.getElementById("signup-form");

form.addEventListener("submit", function(event) {
    let valid = true;

    // Reset error messages
    const errorElements = document.querySelectorAll(".error");
    errorElements.forEach(errorElement => {
        errorElement.textContent = "";
    });

    // Validate Username
    const username = document.getElementById("username").value;
    const usernameError = document.getElementById("username-error");
    const usernamePattern = /^[a-zA-Z0-9]+$/;
    if (!usernamePattern.test(username)) {
        usernameError.textContent = "Username must not contain spaces or special characters.";
        valid = false;
    }

    // Validate Password
    const password = document.getElementById("password").value;
    const passwordError = document.getElementById("password-error");
    const passwordPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
    if (!passwordPattern.test(password)) {
        passwordError.textContent = "Password must contain at least one lowercase letter, one uppercase letter, one number, one special character, and be at least 8 characters long.";
        valid = false;
    }
    const confirmPasswordInput = document.getElementById("confirm_password").value;
    const confirmPasswordError = document.getElementById("confirm-password-error");
    if (password !== confirmPasswordInput) {
        confirmPasswordError.textContent = "Passwords do not match.";
        valid = false;
    }
   
    

    // Validate Email
    const email = document.getElementById("email").value;
    const emailError = document.getElementById("email-error");
    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailPattern.test(email)) {
        emailError.textContent = "Please enter a valid email address.";
        valid = false;
    }

    if (!valid) {
        event.preventDefault(); // Prevent form submission
    }
});

// Real-time validation as the user types
document.getElementById("username").addEventListener("input", function() {
    const username = this.value;
    const usernameError = document.getElementById("username-error");
    const usernamePattern = /^[a-zA-Z0-9]+$/;
    if (!usernamePattern.test(username)) {
        usernameError.textContent = "Username must not contain spaces or special characters.";
    } else {
        usernameError.textContent = "";
    }
});

document.getElementById("password").addEventListener("input", function() {
    const password = this.value;
    const passwordError = document.getElementById("password-error");
    const passwordPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
    if (!passwordPattern.test(password)) {
        passwordError.textContent = "Password must contain at least one lowercase letter, one uppercase letter, one number, one special character, and be at least 8 characters long.";
    } else {
        passwordError.textContent = "";
    }
});


// Add real-time validation for confirm password
document.getElementById("confirm_password").addEventListener("input", function() {
    const password = document.getElementById("password").value;
    const confirmPasswordInput = this.value;
    const confirmPasswordError = document.getElementById("confirm-password-error");

    if (password !== confirmPasswordInput) {
        confirmPasswordError.textContent = "Passwords do not match.";
    } else {
        confirmPasswordError.textContent = "";
    }
});

document.getElementById("email").addEventListener("input", function() {
    const email = this.value;
    const emailError = document.getElementById("email-error");
    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailPattern.test(email)) {
        emailError.textContent = "Please enter a valid email address.";
    } else {
        emailError.textContent = "";
    }
});
</script>
</body>
</html>
